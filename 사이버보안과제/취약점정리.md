# **취약점 정리**

### **OC, 운영체제 명령실행**
| 개요 | 대응방법 |
| --- | --- |
| 웹 어플리케이션에서 system(), exec()와 같은 시스템 명령어를 실행 시킬 수 있는 함수를 제공하며 사용자 입력값에 대한 필터링이 제대로 이루어지지 않을 경우 공격자가 운영체제 시스템 명령어를 호출하여 백도어 설치나 관리자 권한 탈취 등 시스템 보안에 심각한 영향을 미칠수 있는 취약점 | 1. 웹 서버의 권한을 관리자가 아닌 최소의 권한으로 설정하여 명령실행의 결과를 최소화 시킨다.
||2. php.ini의 safe_mode=On을 해준다.
||3. java에서는 Runtime.exe를 사용해야한다면 파라미터 값에 대한 검정 절차가 필수이다. |   

### **SI, SQL 인젝션**

| 개요 | 대응방법 |
| --- | --- |
| 데이터 베이스와 연동된 웹 어플리케이션에서 SQL 질의문에 대한 필터링이 제대로 이루어지지 않을 경우 공격자가 입력이 가능한 폼(웹 브라우저 주소입력창 또는 로그인 폼 등)에 조작된 질의문을 삽입하여 웹 서버의 데이터베이스 정보를 열람 또는 조작을 할 수 있는 취약점 | 1. 인증 우회 (AB : Auth Bypass)
||2. 데이터 노출 (DD : Data Disclisure)
||3. 원격명령 실행 (RCE : Remote Command Excute) |

### **DI, 디렉토리 인덱싱**
| 개요 | 대응방법 |
| --- | --- |
| 웹 어플리케이션을 사용하고 있는 서버의 미흡한 설정으로 인해 인덱싱 기능이 활성화 되어 있을 경우, 공격자가 강제 브라우징을 통해 서버내의 모든 디렉터리 및 파일에 대해 인덱싱이 가능하여 웹 어플리케이션 및 서버의 주요 정보가 노출될수 있는 취약점 | 1. 아파치(APACHE) 웹서버 설정Apache 설정 파일인 Httpd.conf 파일에서 DocumentRoot 항목의 Options 에서 Indexes를 제거한다.<br><br>2. 윈도우용 웹서버(IIS) 설정설정->제어판->관리도구->"인터넷 서비스 관리자"를 선택후 웹사이트에 오른쪽 클릭후 등록정보의 [홈 디렉토리] 탭에서 [디렉토리 검색]체크를 해제한다. 

### **IL, 정보누출**

| 개요 | 대응방법 |
| --- | --- |
| 웹 어플리케이션의 민감한 정보가 개발자의 부주의로 인해 노출되는 것으로 중요 정보(관리자 계정 및 테스트 계정 등)을 주석 구문에 포함시켜 의도하지 않게 정보가 노출되는 취약점. 또한 robots.txt 설정 상태 및 에러 페이지에 정보가 노출되는 경우가 있음. | 최종 사용자에게 스택 추적정보 및 디버그 정보 제공을 금지<br><br>html 소스에 기록되는 내용은 일반 사용자들도 쉽게 접근할수 있기 때문에 중요 내용은 hidden값이나 주석값으로 기입하지 않는다. <br><br>에러 메시지를 바로 표시하지 않고 특정 URL로 리다이렉트 하도록 수정한다.<br><br>http 헤더에 서버 정보가 보이지 않도록 설정을 수정한다.<br><br>apache http 헤더 정보 숨기기<br><br>httpd.conf 파일에서 ServerTokens의 설정 값이 'Min/OS/Full'일경우 'Prob'로 변경한다.<br>IIS 에러 페이지 설정 


| XS, 크로스 사이트 스크립팅 |  |
| --- | --- |
| 검증되지 않은 입력 값으로 인해 사용자의 웹 브라우저에서 의도하지 않은 악성 스크립트가 실행되는 취약점이다 | 개요 |
| < 또는 일정 HTML 태그를 사용하지 못하게 필터링한다 | 대응방법 |

### **CF, 크로스 사이트 리퀘스트 변조**

### **개요**
사이트 간 요청 위조(또는 크로스 사이트 요청 위조, 영어: Cross-site request forgery, CSRF, XSRF)는 웹사이트 취약점 공격의 하나로, 사용자가 자신의 의지와는 무관하게 공격자가 의도한 행위(수정, 삭제, 등록 등)를 특정 웹사이트에 요청하게 하는 공격을 말한다

### **대응방법**
값이 매번 바뀌는 one TIME 값 사용
 인증 값을 알아내는 것이 힘들고, 사용자마다 매번 인증 값이 바뀐다. 쿠키가 아닌 다른 형태의 매번 바뀌는 인증 값을 사용한다.

IPS나 웹 방화벽을 사용 
CSRF 스크립트는 정상적인 HTML 스크립트이기 때문에 보안 솔루션으로는 방어를 할 수 없고 중요 공격 로직을 파악하고 분석하여 안전한 웹 어플리케이션을 개발한다.

Referer 체크
Referer는 HTTP 헤더에 있는 정보로 해당 요청이 요청된 페이지의 정보를 가지고 있는데 해당 정보는 Paros나 Zap, fiddler같은 프로그램으로 조작이 가능하지만 방법이 간단하여 소규모 웹사이트에 주로 이용되는 방법이다.

GET/POST 구분 
img 태그 등을 이용할 경우 GET 요청으로 들어오게 될 것이고, 반면 흔히 하듯 form을 이용해 값을 받을 경우 POST를 이용하게 되는 경우가 많기 때문이다

| IN, 불충분한 인가 |  |
| --- | --- |
| 불충분한 인가 취약점은 페이지 접근을 위한 인증기능이 구현되지 않을 경우, 해커나 인가되지 않는 사용자가 페이지에 접근 및 중요 정보의 변조를 할 수 있는 취약점이다 | 개요 |
| 중요 정보 페이지의 추가 인증 로직 구현 | 대응방법 |

| AU, 자동화 공격 |  |
| --- | --- |
| 자동화 공격 취약점은 웹에 대한 정보변경 시도 횟수 제한을 설정하지 않고 방치하면, 웹사이트를 다운시키거나 무차별 대입 공격으로 인해 사용자 계정을 탈취할 수 있거나, 데이터를 등록할 수 있는 취약점 | 개요 |
| 데이터 등록, 메일 발송 등 웹 애플리케이션 기능에 대한 대량 사용 통제 로직 구현 및 웹 방화벽 룰셋 설정을 통해 대량의 불특정 프로세스 요청 차단 | 대응방법 |

| FU, 파일업로드 |  |
| --- | --- |
| 파일 업로드 기능이 존재하는 웹 사이트의 확장자 필터링이 미흡할 경우, 공격자가 악성 파일을 업로드하여 시스템을 장악할 수 있는 취약점이다. | 개요 |
| 파일 확장자 필터링을 이용한다. whitelist를 통해 허용되는 내용을 제외한 모든 부분을 필터링해서 안전한(허용한) 확장자가 아닐 시, 업로드에 제한을 두게 한다. | 대응방법 |

