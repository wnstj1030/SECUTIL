## **BOF 보완방법**

해당 문제에서는 gets 함수를 사용해서 문자열을 입력 받을때 길이의 제한이 없어 (bufferoverflow 발생) 취약점이 발생한다

따라서 ‘문자열의 길이 제한’을 두어야 취약점을 보완할 수 있는 것이다

이렇게 문자열의 길이 제한을 두고 입력을 받는 함수가 바로 `fgets`함수이다

```c
char *fgets(char *str, int n, FILE *stream)
```

첫 번째는 gets()와 같이 문자열이 지정될 포인터 

두 번째는 입력받을 문자열의 길이

세 번째는 입력받을 스트림을 지정한다

여기서의 gets와 큰 차이점은 위에서 말했다시피 두 번째 매개변수(문자열의 길이 제한)이다 

값을 저장할 공간은 100인데 500 길이의 문자열이 입력 되었다면 두 함수는 각각

- fgets()는 개행문자를 만나거나 (n(2번째 매개변수)-1)길이만큼 문자열이 입력될 때까지만 받아오기 때문에 99개의 문자만 읽어들이고, 남은 값들을 다음 입력 함수로 넘긴다
- 하지만 gets()는 한계가 없다 즉, 최대공간인 100을 넘어 계속 저장이 된다 (→ 이를 버퍼오버플로우라고 한다 → 할당된 메모리의 범위를 벗어남 → 취약점 발생)

### 정리

gets() 함수는 최근 표준에서 제외될 정도로 문제가 많은 함수이므로 여러 단어를 입력받을 때는 fgets() 혹은 이를 가공하여 쓰자!