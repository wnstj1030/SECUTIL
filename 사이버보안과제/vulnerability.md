# **보안 취약점 종류 알아보기**

### **Brute Force?**

무차별로 임의의 문자를 조합하여 하니씩 대입해 보는 공격기법이다

그야말로 대입한 값이 일치할 때까지 모든 경우의 수를 시도하는 방법이다

### **대응방법?**

대응방법은 로그인 창의 경우 

아이디 존재여부를 확인하거나

잘못된 비밀번호의 입력 횟수를 제한하는 것이다 

### **Command Injection?**

Command Injection 은 웹 애플리케이션에서 시스템 명령을 사용할 때, 세미콜론 혹은 &, && 를 사용하여 하나의 Command를 Injection 하여 두 개의 명령어가 실행되게 하는 공격이다

OWASP Top10 중 1위에 속해 있는 Injection 공격으로 서버자체의 콘솔 명령어를 실행시킬 수 있기 때문에 공격이 성공한다면 매우 큰 피해가 발생할 수 있다

### **대응방법?**

서버의 민감정보를 알 수 있는 서버의 명령을 실행하는 함수는 되도록이면 사용되지 말아야하고,

사용하더라도 서버에 영향을 끼칠 수 있는 명령어는 사용이 불가능하도록 해야한다

또 실 서버와 분리하여 운영을 하는 것도 좋은 방법이다

### **CSRF?**

CSRF 공격(Cross Site Request Forgery)은 웹 어플리케이션 취약점 중 하나로 인터넷 사용자(희생자)가 자신의 의지와는 무관하게 공격자가 의도한 행위(수정, 삭제, 등록 등)를 특정 웹사이트에 요청하게 만드는 공격이다

예를들어, 커뮤니티에 희생자의 계정으로 광고성 글을 올리는 것이 가능해진다

조금 더 설명하자면, CSRF는 해커가 사용자의 컴퓨터를 감염시키거나 서버를 해킹을 해서 이뤄지는 공격은 아니다.

 그래서 CSRF 공격이 이뤄지려면 다음 조건이 만족되어야 한다

- 위조 요청을 전송하는 서비스에 희생자가 로그인 상태
- 희생자가 해커가 만든 피싱 사이트에 접속

언뜻 보면 두 가지 조건이 만족되기에는 어려움이 있어보이지만 생각만큼 드문일이 아니다

예를 들면 페이스북 구글 네이버 등의 사이트들에서는 자동로그인이 되어 있는 경우가 많고 

또한 희생자가 해커의 피싱사이트를 피싱메일 등을 통해 접속될 수 있다

또한 해커의 피싱 사이트를 접속하지 않더라도 해커가 XSS공격을 성공한 정상 사이트를 통해

CSRF가 이루어 질 수 있다

### **대응방법?**

- Referrer 검증
- Security Token 사용 (A.K.A CSRF Token)

대표적으로 위 2가지 방법이 있다

### **File Inclusion?**

파일 삽입 취약점이라고 하며

 공격자가 악성 서버 스크립트를 서버에 전달, 해당 페이지를 통해 악성 코드가 실행 되도록 하는 취약점이다

- 악성 스크립트가 삽입되는 위치에 따라, LFI(Local File Inclusion), RFI(Remote File Inclusion)으로 분류된다
- RFI?
    
    공격자가 외부 서버(공격자 서버 등)에 있는 원격 파일을 URL 파라미터에 포함, 전달하여 실행하는 경우
    
- LFI?
    
    공격자가 공격 대상 서버에 업로드 되어 있는(위치한) 파일을 실행, 공격에 활용하는 경우
    
- 경로 제한 또는, 파라미터 변조 등에 대한 필터링의 부재로 경로 접근, 파일 실행, 외부 파일 다운로드 등의 다양한 공격으로 활용 가능하다

### **대응방법?**

- 관리자는 소스코드 상 include, require 등의 구문/함수가 존재하는지 사전 검증, 사용자 입력값을 통한 원격 파일 접근을 차단해야한다
- php.ini 파일에서, allow_url_fopen = Off 및 allow_url_include = Off 설정을 통해 외부 사이트의 악성 스크립트 파일을 URL 형태로 include 되지 않도록 한다

include : 오류 발생 시 에러 메세지를 출력 후, 스크립트를 계속해서 실행

require : 오류 발생 시 에러 메세지를 출력 후, 스크립트 실행 중지

### **File Upload?**

파일 업로드 기능이 존재하는 웹 사이트의 확장자 필터링이 미흡할 경우, 공격자가 악성 파일을 업로드하여 시스템을 장악할 수 있는 취약점이다.

### **대응방법?**

파일 확장자 필터링을 이용한다. whitelist를 통해 허용되는 내용을 제외한 모든 부분을 필터링해서 안전한(허용한) 확장자가 아닐 시, 업로드에 제한을 두게 한다.

### SQL Injection?

데이터 베이스와 연동된 웹 어플리케이션에서 SQL 질의문에 대한 필터링이 제대로 이루어지지 않을 경우 공격자가 입력이 가능한 폼(웹 브라우저 주소입력창 또는 로그인 폼 등)에 조작된 질의문을 삽입하여 웹 서버의 데이터베이스 정보를 열람 또는 조작을 할 수 있는 취약점이다

### **대응방법?**

1. 인증 우회 (AB : Auth Bypass)
2. 데이터 노출 (DD : Data Disclisure)
3. 원격명령 실행 (RCE : Remote Command Excute)

### **SQL Injection Blind?**

정보를 직접적으로 알수는 없더라도 True/False값을 통해 정보를 알아내는 공격이다

아이디를 입력했을 때 사용자의 정보를 알려주는것이 아니라 존재여부만을 알려주는 것이다.

SQL인젝션에 취약한지 알아보려 사용했던 ' 작은따옴표를 입력하여도

그냥 그런 아이디는 찾을 수 없다고만 출력되고 있기때문에 SQL문을 사용하고있는지 또는 어떤 SQL을 사용하고있는지 정보를 주지않아서 쉽게 공격할 수 없다.

설령 SQL을 조작할 수 있다하더라도 정보를 출력해주지않기때문에 어렵다.

하지만 특정 쿼리를 입력하여서 단서를 얻어낼수는 있다.

### **대응방법?**

SQL 문법에서 사용하는 특수 문자가 있을 경우 백슬래시를 붙이는 등 입력 데이터를 SQL 문법에서 인식하지 않게 방어한다

PHP에서는 mysql_real_escape_string 함수를 사용하여 NULL, \n, \r(맨 앞이동), ', ", ^Z 특수문자를 우회하도록 한다

### **XSS?**

검증되지 않은 입력 값으로 인해 사용자의 웹 브라우저에서 의도하지 않은 악성 스크립트가 실행되는 취약점이다

### 대응방법?

< 또는 일정 HTML 태그를 사용하지 못하게 필터링한다